// STAGE 1: THE OUTSKIRTS
// Introduction to Swarms and Heavy Strikers

window.STAGES = window.STAGES || {};

window.STAGES[1] = {
    name: "SECTOR 1: OUTSKIRTS",
    message: "Pilot, we have lost contact with Outpost Omega. Sensors indicate the System Core has gone rogue. <br><br>Neutralize the threat before it spreads to the network.",
    maxWaves: 10,
    
    // Boss Configuration for Stage 1
    bossInit: (boss) => {
        boss.name = "System Core: Omega";
        boss.color = "#ff4d4d";
        boss.maxHp = 2500; // Base HP
        boss.damageMultiplier = 1.0;
        // Standard Behavior
    },

    // Wave Spawning Logic
    spawnWave: (wave, width, enemies, EnemyClasses) => {
        const { SwarmEnemy, HeavyStriker, LaserEnemy } = EnemyClasses;
        
        if (wave === 1) {
            for(let i=0; i<10; i++) setTimeout(() => enemies.push(new SwarmEnemy(Math.random() * width, -50)), i*400);
        } 
        else if (wave === 2) {
            for(let i=0; i<16; i++) setTimeout(() => enemies.push(new SwarmEnemy(Math.random() * width, -50)), i*300);
        }
        else if (wave === 3) {
            for(let i=0; i<24; i++) setTimeout(() => enemies.push(new SwarmEnemy(Math.random() * width, -50)), i*200);
        }
        else if (wave === 4) {
            setTimeout(() => enemies.push(new HeavyStriker(width/2, -100)), 0);
            for(let i=0; i<15; i++) setTimeout(() => enemies.push(new SwarmEnemy(Math.random() * width, -50)), 1000 + i*300);
        }
        else if (wave === 5) {
            enemies.push(new HeavyStriker(width/4, -100));
            enemies.push(new HeavyStriker(width*3/4, -100));
            for(let i=0; i<20; i++) setTimeout(() => enemies.push(new SwarmEnemy(Math.random() * width, -50)), 2000 + i*250);
        }
        else if (wave === 6) {
            enemies.push(new LaserEnemy(width*0.2, -100));
            enemies.push(new LaserEnemy(width*0.8, -100));
            for(let i=0; i<20; i++) setTimeout(() => enemies.push(new SwarmEnemy(Math.random() * width, -50)), i*200);
        }
        else if (wave === 7) {
            enemies.push(new LaserEnemy(width*0.1, -100));
            enemies.push(new LaserEnemy(width*0.9, -100));
            setTimeout(() => enemies.push(new HeavyStriker(width/2, -100)), 500);
        }
        else if (wave === 8) {
            enemies.push(new LaserEnemy(width/2, -100));
            enemies.push(new LaserEnemy(200, -200));
            enemies.push(new LaserEnemy(width-200, -200));
            for(let i=0; i<30; i++) setTimeout(() => enemies.push(new SwarmEnemy(Math.random() * width, -50)), 1000 + i*200);
        }
        else if (wave === 9) {
            enemies.push(new LaserEnemy(width*0.2, -100));
            enemies.push(new LaserEnemy(width*0.8, -100));
            enemies.push(new HeavyStriker(width/3, -200));
            enemies.push(new HeavyStriker(width*2/3, -200));
            for(let i=0; i<40; i++) setTimeout(() => enemies.push(new SwarmEnemy(Math.random() * width, -50)), 500 + i*150);
        }
        
        // Return delay before next wave check
        return 2000;
    }
};
